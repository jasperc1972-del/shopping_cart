-- 使用 UTF8 編碼
CREATE DATABASE IF NOT EXISTS shopping_cart CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE shopping_cart;

-- 使用者表
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE
);

-- 商品表
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    stock INT NOT NULL,
    image_url VARCHAR(255)
);

-- 購物車項目表
CREATE TABLE cart_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (product_id) REFERENCES products(id)
);


-- 插入使用者
INSERT INTO users (username) VALUES ('jasper');

-- 插入商品
INSERT INTO products (name, price, stock, image_url) VALUES
('蘋果', 30.00, 100, 'apple.jpg'),
('香蕉', 20.00, 80, 'banana.jpg'),
('鳳梨', 50.00, 50, 'pineapple.jpg');

-- 插入購物車項目
INSERT INTO cart_items (user_id, product_id, quantity) VALUES
(1, 1, 2),  -- jasper 買了 2 顆蘋果
(1, 2, 3);  -- jasper 買了 3 根香蕉

SELECT 
 p.name AS 商品名稱,
 p.price AS 單價,
 c.quantity AS 數量,
 (p.price * c.quantity) AS 小計,
 p.image_url AS 圖片
FROM cart_items c
JOIN products p ON c.product_id = p.id
WHERE c.user_id = 1;








shopping_cart/
├── app/
│   ├── __init__.py
│   ├── extensions.py
│   ├── models/
│   │   ├── user.py
│   │   ├── product.py
│   │   └── cart_item.py
│   ├── routes/
│   │   └── cart.py
│   └── templates/
│       └── view_cart.html
├── config.py
├── run.py
